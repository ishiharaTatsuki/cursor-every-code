---
description: hooks
alwaysApply: true
globs:
  - "**/*"
---

# Hooks System

## Hook Types

- **PreToolUse**: Before tool execution (validation, reminders, blocking)
- **PostToolUse**: After tool execution (auto-format, lightweight checks)
- **Stop**: After each assistant response (lightweight audits)
- **SessionEnd**: When the session ends (heavier evaluation/checks)

## Current Hooks (in `./.claude/settings.json`)

### PreToolUse
- **dev server block**: Blocks starting common JS dev servers outside tmux
- **tmux reminder**: Suggests tmux for long-running commands (install/test/build)
- **git push reminder**: Prompts you to review diff/status before pushing
- **doc blocker**: Blocks creation of ad-hoc .md/.txt files outside approved locations

### PostToolUse
- **PR creation**: If `gh pr create` ran, logs PR URL and suggests a `gh pr review ...` command
- **build message**: Lightweight message after common build commands
- **Prettier**: Auto-formats JS/TS files after edits (prefers local prettier, falls back to `npx --no-install`)
- **TypeScript check**: Runs `tsc --noEmit` after editing .ts/.tsx (prefers local tsc, falls back to `npx --no-install`)
- **console.log warning**: Warns if edited JS/TS file contains `console.log`
- **Python after edit**: Tracks changed .py files and runs `ruff format/check`

### Stop
- **console.log audit**: Checks modified files for `console.log` after each response

### SessionEnd
- **session persistence**: Saves session state
- **continuous-learning evaluation**: Suggests extracting reusable patterns if the session was substantial
- **python stop checks**: If .py changed, runs ruff/mypy/pytest then clears state

## Auto-Accept Permissions

Use with caution:
- Enable for trusted, well-defined plans
- Disable for exploratory work
- Never use dangerously-skip-permissions flag
- Prefer explicit tool allowlists in your assistant settings (project-level), rather than blanket skips

## TodoWrite Best Practices

Use TodoWrite tool to:
- Track progress on multi-step tasks
- Verify understanding of instructions
- Enable real-time steering
- Show granular implementation steps

Todo list reveals:
- Out of order steps
- Missing items
- Extra unnecessary items
- Wrong granularity
- Misinterpreted requirements
