---
description: performance
alwaysApply: true
globs:
  - "**/*"
---

# Performance & Reliability

## Default approach
- **Measure first**: reproduce, profile, and capture a before/after.
- Optimize the **biggest bottleneck** (CPU, I/O, memory, DB, network).
- Prefer **clarity** over premature micro-optimizations.

## Typical wins
- Reduce needless work (avoid repeated parsing / repeated DB queries).
- Cache (memoize pure functions, add query caching, reuse clients).
- Batch I/O (bulk DB operations, fewer round-trips).
- Use streaming for large data.

## Guardrails
- Avoid O(NÂ²) loops on user-sized inputs unless N is provably small.
- Do not add caching without:
  - a key definition,
  - an invalidation strategy,
  - and size/TTL limits.
- Keep timeouts and retries explicit for network calls.

## When changing behavior
- Add/adjust tests for new edge cases.
- Preserve backward compatibility unless explicitly requested.