---
description: performance
alwaysApply: true
globs:
  - "**/*"
---

# Performance

## Model / mode choice (tool-agnostic)

- Use a **fast** model/mode for:
  - Small edits, refactors, scaffolding
  - Iterative “try → run → fix” loops
- Use a **deeper reasoning** model/mode for:
  - Architecture decisions
  - Multi-module changes with high coupling
  - Debugging hard-to-reproduce issues

## Context window management

- Try not to start a risky large change when the chat is already very long.
- For big refactors:
  - Split into smaller PRs/commits
  - Work module-by-module
  - Keep a running checklist of invariants and acceptance criteria

## Planning

For complex tasks:
1. Write a short plan (milestones + risks)
2. Identify test strategy early
3. Make one change at a time; validate frequently

## Build / test troubleshooting

If builds/tests fail:
1. Read the first error carefully (often the root cause)
2. Reproduce with the minimal command
3. Fix incrementally; re-run quickly
4. If stuck, isolate by bisecting changes or toggling parts
